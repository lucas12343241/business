<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Business Tycoon RPG</title>
    <style>
        body {
            font-family: Verdana, sans-serif;
            text-align: center;
        }
        .board {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            margin-top: 20px;
        }
        .property {
            width: 120px;
            height: 120px;
            border: 1px solid black;
            margin: 5px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            flex-direction: column;
        }
        .player-info {
            margin-top: 20px;
        }
        .button-container {
            margin-top: 20px;
        }
        #game-message {
            margin-top: 20px;
            font-size: 1.2em;
            color: green;
        }
    </style>
</head>
<body>
    <h1>Business Tycoon RPG</h1>
    <p>Invest, compete, expand, and become the ultimate market leader!</p>
    <div class="board" id="board"></div>
    <div class="player-info" id="player-info">Balance: £1000 | Level: 1 | XP: 0</div>
    <div class="button-container">
        <button id="next-round-button" onclick="nextRound()">Next Round</button>
    </div>
    <div id="game-message"></div>

    <script>
        let playerBalance = 1000;
        let playerXP = 0;
        let playerLevel = 1;
        let round = 1;
        let rivalBalance = 1000;
        let gameOver = false;

        let properties = [
            { name: "Tech Startup", price: 200, revenue: 50, owner: null, expansionLevel: 0 },
            { name: "Retail Store", price: 150, revenue: 40, owner: null, expansionLevel: 0 },
            { name: "Fast Food Chain", price: 180, revenue: 45, owner: null, expansionLevel: 0 },
            { name: "Gaming Studio", price: 250, revenue: 60, owner: null, expansionLevel: 0 },
            { name: "Biotech Lab", price: 300, revenue: 70, owner: null, expansionLevel: 0 }
        ];

        let challenges = [
            "Market Crash: Lose 10% of your balance!",
            "Tech Boom: All businesses generate 20% extra revenue!",
            "Tax Increase: Lose £100 in fees!",
            "Economic Recession: All revenues decrease by 15%",
            "New Trade Partner: Earn an extra £50 this round!"
        ];

        function updateUI() {
            document.getElementById("player-info").innerText = `Balance: £${Math.floor(playerBalance)} | Level: ${playerLevel} | XP: ${playerXP} | Round: ${round}`;
            let board = document.getElementById("board");
            board.innerHTML = "";
            properties.forEach((prop, index) => {
                let div = document.createElement("div");
                div.className = "property";
                div.innerText = `${prop.name}\n£${prop.price}\nRevenue: £${prop.revenue}\nExpansions: ${prop.expansionLevel}\nOwned: ${prop.owner ? prop.owner : "None"}`;
                div.style.backgroundColor = prop.owner === "Player" ? "lightgreen" : prop.owner === "Rival" ? "lightcoral" : "white";
                if (!gameOver) {
                    div.onclick = () => (prop.owner === "Player" ? expandBusiness(index) : buyProperty(index));
                }
                board.appendChild(div);
            });
        }

        function buyProperty(index) {
            if (gameOver) return;
            let prop = properties[index];
            if (prop.owner) {
                alert("This business is already owned!");
                return;
            }
            if (playerBalance >= prop.price) {
                playerBalance -= prop.price;
                prop.owner = "Player";
                playerXP += 10;
                levelUp();
                alert(`You acquired ${prop.name}! It generates £${prop.revenue} per round.`);
                checkWinCondition();
            } else {
                alert("Not enough money to invest!");
            }
            updateUI();
        }

        function expandBusiness(index) {
            if (gameOver) return;
            let prop = properties[index];
            let expansionCost = (prop.expansionLevel + 1) * 100;
            if (playerBalance >= expansionCost) {
                playerBalance -= expansionCost;
                prop.revenue += 20;
                prop.expansionLevel++;
                alert(`You expanded ${prop.name}! Revenue increased to £${prop.revenue}.`);
            } else {
                alert("Not enough money to expand!");
            }
            updateUI();
        }

        function rivalTurn() {
            if (gameOver) return;
            let availableProperties = properties.filter(p => !p.owner);
            if (availableProperties.length > 0 && rivalBalance >= availableProperties[0].price) {
                let rivalChoice = availableProperties[Math.floor(Math.random() * availableProperties.length)];
                rivalChoice.owner = "Rival";
                rivalBalance -= rivalChoice.price;
                alert(`Your rival acquired ${rivalChoice.name}!`);
            }
        }

        function levelUp() {
            if (playerXP >= playerLevel * 50) {
                playerXP = 0;
                playerLevel++;
                alert(`Level up! You are now Level ${playerLevel}!”);
            }
        }

        function nextRound() {
            if (gameOver) return;
            let totalRevenue = properties.filter(p => p.owner === "Player").reduce((sum, p) => sum + p.revenue, 0);
            playerBalance += totalRevenue;
            round++;

            let challengeIndex = Math.floor(Math.random() * challenges.length);
            let challenge = challenges[challengeIndex];
            alert(`Round ${round}: ${challenge}`);

            if (challenge.includes("Lose 10%")) {
                playerBalance *= 0.9;
            } else if (challenge.includes("20% extra")) {
                properties.forEach(p => p.owner === "Player" ? p.revenue *= 1.2 : null);
            } else if (challenge.includes("Lose £100")) {
                playerBalance -= 100;
            } else if (challenge.includes("decrease by 15%")) {
                properties.forEach(p => p.owner === "Player" ? p.revenue *= 0.85 : null);
            } else if (challenge.includes("extra £50")) {
                playerBalance += 50;
            }

            rivalTurn();
            checkWinCondition();
            updateUI();
        }

        function checkWinCondition() {
            let allOwned = properties.every(p => p.owner === "Player");
            if (allOwned) {
                gameOver = true;
                document.getElementById("game-message").innerText = "🎉 Congratulations! You've taken over the entire market and won the game!";
                document.getElementById("next-round-button").disabled = true;
            }
        }

        updateUI();
    </script>
</body>
</html>
